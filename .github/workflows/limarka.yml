name: Container Workflow

on:
  push:
    branches: [ "master" ]
jobs:
#   build-limarka:
#     runs-on: ubuntu-latest 
#     container: 
#       image: docker://reinanhs/limarka:latest

#     steps:
#     - uses: actions/checkout@v3
    
#     - name: Run Commands
#       run: |
#         limarka check
#         limarka --version
#         limarka exec
#         mkdir -p dist
#         mv xxx-* ./dist/
#         ls ./dist
        
#     - name: Archive limarka artifacts
#       uses: actions/upload-artifact@v3
#       with:
#         name: dist-limarka
#         path: dist
#         retention-days: 1

  build-page:
#     needs: build-limarka
    runs-on: ubuntu-latest 
    steps:
      - name: Check out the repo
        uses: actions/checkout@v3
      - name: Run the build process with Docker
        uses: addnab/docker-run-action@v3
        with:
          image: reinanhs/limarka-render-html:latest
          options: -v ${{ github.workspace }}:/var/www
          run: |
            composer --version
            php --version
            vendor/bin/jigsaw --version
            pwd
            ls
#       - uses: actions/checkout@v3
#       - name: Download limarka artifact
#         uses: actions/download-artifact@v3
#         with:
#           name: dist-limarka
